<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8"/>
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
        <title>SqlMan/Query Concept</title>
        <meta name="description" content="TODO"/>
        <meta name="keywords" content="SqlMan, document, java sql, java jdbc, java orm, jdbc tools, jdbc helper, last one"/>
        <meta name="viewport" content="width=device-width, initial-scale=1"/> 
        <meta
        name="viewport" content="width=device-width, initial-scale=1"/>
        <link rel="stylesheet" href="https://framework.ajaxjs.com/static/new-ui/css/common.css" />
        <link rel="stylesheet" href="https://iam.ajaxjs.com/asset/main.css"/>
        <link rel="icon" type="image/png" href="/asset/favicon.png"/>
        <script src="https://framework.ajaxjs.com/static/aj-docs/common.js"></script>
         <script>
             var _hmt = _hmt || [];
             (function() {
               var hm = document.createElement("script");
               hm.src = "https://hm.baidu.com/hm.js?3cb62106ad945fc91efddfe250e1542e";
               var s = document.getElementsByTagName("script")[0];
               s.parentNode.insertBefore(hm, s);
             })();
         </script>
    </head>
    <body>
        <nav>
            <div>
                <div class="links">
                    <a href="/">ğŸ  é¦–é¡µ</a>
                    |
                                                                            âš™ï¸ æºç ï¼š
                    <a target="_blank" href="https://github.com/lightweight-component/SqlMan">Github</a>/<a target="_blank" href="https://gitcode.com/lightweight-component/SqlMan">Gitcode</a>
                    
                    |
                    <a href="/docs">English Version</a>
                </div>
                <h1>
                    <img src="/asset/favicon-2x.png" style="vertical-align: middle;height: 45px;margin-bottom: 6px;"/> SqlMan
                </h1>
                <h3>è½»é‡çº§ JDBC åŠ©æ‰‹â€”â€”ç”¨æˆ·æ‰‹å†Œ</h3>
            </div>
        </nav>
        <div>
            <menu>
                
                <ul>
                    <li class="selected">
                        <a href="/docs/cn">é¦–é¡µ</a>
                    </li>
                    <li>
                        <a href="/docs/quick-start-cn">å¿«é€Ÿå¼€å§‹</a>
                    </li>
                    <li>
                        <a href="/docs/setup-cn">å®‰è£…ä¸é…ç½®</a>
                    </li>
                </ul>
                <h3>æ•°æ®åº“æŸ¥è¯¢</h3>
                <ul>
                    <li>
                        <a href="/docs/query/query-concept-cn">åŸºç¡€æ¦‚å¿µ</a>
                    </li>
                    <li>
                        <a href="/docs/query/query-tutorial-cn">æŸ¥è¯¢æ•™ç¨‹</a>
                    </li>
                    <li>
                        <a href="/docs/query/query-paging-cn">åˆ†é¡µæŸ¥è¯¢</a>
                    </li>
                </ul>
                <h3>å†™å…¥æ•°æ®</h3>
                <ul>
                    <li>
                        <a href="/docs/write/Create-Update-Delete-cn">åˆ›å»º/ä¿®æ”¹/åˆ é™¤</a>
                    </li>
                    <li>
                        <a href="/docs/write/batch-cn">æ‰¹é‡æ›´æ–°</a>
                    </li>
                </ul>
                <h3>å…¶ä»–ç”¨æ³•</h3>
                <ul>
                    <li>
                        <a href="/docs/other/sql-xml-cn">SQL å†™åœ¨ XML ä¸­</a>
                    </li>
                    <li>
                        <a href="/docs/other/entity-cn">â€œç±»â€ ORM</a>
                    </li>
                </ul>
                <h3>Misc</h3>
                <ul>
                    <li><a href="/docs/common/versions-cn">æ›´æ–°å†å²</a></li>
                    <li><a href="/docs/common/contact-cn">è”ç³»</a></li>
                </ul>
            </menu>
            <article class="aj-text chinese">
                <h1>ä¸å®ä½“äº¤äº’</h1>
<p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬ä¸€ç›´åœ¨è®¨è®ºä½¿ç”¨ SQL è¯­å¥çš„ SqlManã€‚å¯èƒ½çœ‹èµ·æ¥æˆ‘ä»¬ç¦»ä¸å¼€ SQLï¼Œä½†äº‹å®å¹¶éå¦‚æ­¤ã€‚SqlMan æä¾›äº†ä¸€ç§ä½¿ç”¨å®ä½“ä¸æ•°æ®åº“äº¤äº’çš„æ–¹å¼ï¼Œæ— éœ€ç¼–å†™ä»»ä½• SQL ä»£ç ã€‚</p>
<p>è¿™é‡Œçš„å®ä½“æŒ‡çš„æ˜¯ Java Beanï¼ˆPOJOï¼‰æˆ– <code>Map</code> å¯¹è±¡ã€‚</p>
<h2>æŸ¥è¯¢å®ä½“</h2>
<p>å‡è®¾æˆ‘ä»¬çš„æ•°æ®åº“ä¸­æœ‰ä¸€ä¸ª <code>shop_address</code> è¡¨ï¼Œæˆ‘ä»¬æƒ³è¦æŸ¥è¯¢å…¶ä¸­çš„æ‰€æœ‰è®°å½•ã€‚æœ€åŸºæœ¬çš„ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“è¦æŸ¥è¯¢å“ªä¸ªè¡¨ï¼Œæ‰€ä»¥å¯ä»¥è¿™æ ·åšï¼š</p>
<pre><code class="language-java">List&lt;Map&lt;String, Object&gt;&gt; result2 = new Entity(conn).setTableName(&quot;shop_address&quot;).list().queryList();
assertFalse(result2.isEmpty());
</code></pre>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒä¼šç”Ÿæˆä»¥ä¸‹ SQL è¯­å¥ï¼š</p>
<pre><code class="language-sql">SELECT * FROM shop_address WHERE 1=1 ORDER BY create_date DESC
</code></pre>
<p>éµå¾ª&quot;çº¦å®šä¼˜äºé…ç½®&quot;åŸåˆ™ï¼Œå®ƒå‡è®¾è¡¨ä¸­æœ‰ä¸€ä¸ªåä¸º <code>create_date</code> çš„åˆ—ã€‚å®ƒä¼šè‡ªåŠ¨æ‰§è¡Œé™åºæŸ¥è¯¢ã€‚</p>
<p>å¦‚æœè¿™æ ·çš„åˆ—ä¸å­˜åœ¨æ€ä¹ˆåŠï¼Ÿæˆ‘ä»¬å¯ä»¥æŒ‡å®šè¦æŸ¥è¯¢çš„åˆ—ã€‚è¿™å®Œå…¨å¯ä»¥ï¼Œä½†éœ€è¦æ›´å¤šä»£ç ï¼š</p>
<pre><code class="language-java">TableModel tableModel = new TableModel();
tableModel.setTableName(&quot;shop_address&quot;);
tableModel.setCreateDateField(&quot;create_at&quot;); // æŒ‡å®šåˆ—å
tableModel.setHasIsDeleted(false);

List&lt;Map&lt;String, Object&gt;&gt; result = new Entity(conn).setTableModel(tableModel).list().queryList();
assertFalse(result.isEmpty());
</code></pre>
<p><code>TableModel</code> å®šä¹‰äº†å¦‚ä½•æŸ¥è¯¢è¡¨ã€‚</p>
<h3>è‡ªå®šä¹‰æ¡ä»¶æŸ¥è¯¢</h3>
<p>è™½ç„¶ä½ ä¸èƒ½åƒ SQL è¯­å¥é‚£æ ·ç›´æ¥ä¼ é€’å‚æ•°ï¼Œä½†ä½ ä»ç„¶å¯ä»¥ä¼ é€’ <code>WHERE</code> å­å¥åˆ°æŸ¥è¯¢ä¸­ï¼š</p>
<pre><code class="language-java">List&lt;Address&gt; addresses = new Entity(conn).setTableModel(tableModel).list(&quot;AND stat = 1&quot;).queryList(Address.class);
assertNotNull(addresses);
</code></pre>
<p>è®°ä½åœ¨æ¡ä»¶è¯­å¥å‰æ·»åŠ  <code>AND</code>ã€‚</p>
<p>å¦å¤–ï¼Œè¿™ä¸ªä¾‹å­å±•ç¤ºäº†ç»“æœæ˜¯ Java Bean å¯¹è±¡è€Œä¸æ˜¯ Map å¯¹è±¡ã€‚</p>
<h3>ä½¿ç”¨ Java Bean æŸ¥è¯¢</h3>
<p>ä½¿ç”¨ Java Bean ä¹Ÿæ˜¯å¯ä»¥çš„ï¼š</p>
<pre><code class="language-java">Address bean = new Entity(conn).setTableName(&quot;shop_address&quot;).info(1L).query(Address.class);
</code></pre>
<h3>åˆ†é¡µæŸ¥è¯¢</h3>
<p>åˆ†é¡µåŠŸèƒ½çš„ä½¿ç”¨æ–¹å¼ä¸ä¸Šé¢ç›¸åŒï¼š</p>
<pre><code class="language-java">PageResult&lt;Object&gt; article = new Entity(conn).setTableName(&quot;shop_address&quot;).list().page();
assertFalse(article.isEmpty());
</code></pre>
<h1>æ’å…¥å®ä½“</h1>
<p>è¿™æ®µä»£ç æ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨ SqlMan çš„å®ä½“åŠŸèƒ½å‘æ•°æ®åº“æ’å…¥æ–°è®°å½•ã€‚é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„ Address å¯¹è±¡å¹¶è®¾ç½®å…¶å±æ€§ï¼š</p>
<pre><code class="language-java">Address address = new Address();
address.setName(&quot;å‡ºå·®&quot;);
address.setAddress(&quot;å¹¿å·&quot;);
address.setPhone(&quot;188&quot;);
address.setPhone2(&quot;188&quot;);
address.setRe(&quot;Tom&quot;);
</code></pre>
<p>ç„¶åï¼Œä½¿ç”¨ <code>TableModel</code> é…ç½®è¡¨è®¾ç½®ï¼š</p>
<pre><code class="language-java">TableModel tableModel = new TableModel();
tableModel.setTableName(&quot;shop_address&quot;);
tableModel.setAutoIns(true);
tableModel.setIdTypeClz(Integer.class);
</code></pre>
<p>æœ€åï¼Œæ‰§è¡Œæ’å…¥æ“ä½œï¼š</p>
<pre><code class="language-java">CreateResult&lt;Integer&gt; result = new Entity(conn).setTableModel(tableModel).input(address).create(Integer.class);
assertNotNull(result.getNewlyId());
assertTrue(result.isOk());
</code></pre>
<p>è¿™æ®µä»£ç ä¼šæ ¹æ® Address å¯¹è±¡çš„å±æ€§è‡ªåŠ¨ç”Ÿæˆå¹¶æ‰§è¡Œ INSERT SQL è¯­å¥ã€‚<code>CreateResult</code> å¯¹è±¡è¿”å›æ“ä½œçš„ç›¸å…³ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ–°ç”Ÿæˆçš„è®°å½• IDã€‚</p>
<h1>æ›´æ–°å®ä½“</h1>
<p>è¿™æ®µä»£ç æ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨ SqlMan çš„å®ä½“åŠŸèƒ½æ›´æ–°æ•°æ®åº“ä¸­çš„ç°æœ‰è®°å½•ã€‚</p>
<pre><code class="language-java">Address address = new Address();
address.setId(1);
address.setName(&quot;å‡ºå·®&quot;);
address.setAddress(&quot;å¹¿å·&quot;);
address.setPhone(&quot;188&quot;);
address.setPhone2(&quot;188&quot;);
address.setRe(&quot;Tom&quot;);

TableModel tableModel = new TableModel();
tableModel.setTableName(&quot;shop_address&quot;);
tableModel.setAutoIns(true);
tableModel.setIdTypeClz(Integer.class);

UpdateResult result;
result = new Entity(conn).setTableModel(tableModel).input(address).update();

assertTrue(result.isOk());
</code></pre>
<p>ä¸æ’å…¥æ“ä½œçš„ä¸»è¦åŒºåˆ«æ˜¯ï¼š</p>
<ul>
<li><code>Address</code> å¯¹è±¡åŒ…å«ä¸€ä¸ª ID å€¼ï¼ˆ<code>setId(1)</code>ï¼‰ï¼Œå‘Šè¯‰ SqlMan è¦æ›´æ–°å“ªæ¡è®°å½•</li>
<li>ä½¿ç”¨ <code>update()</code> æ–¹æ³•è€Œä¸æ˜¯ <code>create()</code></li>
<li>ç»“æœæ˜¯ä¸€ä¸ª <code>UpdateResult</code> å¯¹è±¡ï¼Œè¡¨ç¤ºæ“ä½œæ˜¯å¦æˆåŠŸ</li>
</ul>
<p>è¿™æ®µä»£ç ä¼šæ ¹æ® Address å¯¹è±¡çš„å±æ€§è‡ªåŠ¨ç”Ÿæˆå¹¶æ‰§è¡Œ UPDATE SQL è¯­å¥ï¼Œæ›´æ–° ID = 1 çš„è®°å½•ã€‚</p>
<h2>åˆ—åæ˜ å°„</h2>
<p>å¦‚æœæ•°æ®åº“ä¸­çš„åˆ—åä¸ Java Bean ä¸­çš„å±æ€§åä¸åŒæ€ä¹ˆåŠï¼ŸSqlMan æä¾›äº†ä¸€ç§å°†åˆ—åæ˜ å°„åˆ°å±æ€§åçš„æ–¹æ³•ï¼Œåªéœ€ä½¿ç”¨ Java æ³¨è§£ <code>@Column(name =&quot;xxxx&quot;)</code> æ¥æŒ‡å®šï¼š</p>
<pre><code class="language-java">@Data
public class Address {
    private Integer id;

    private String name;

    private String address;

    private String phone;

    @Transient // éæŒä¹…åŒ–
    private String phone2;

    @Column(name =&quot;receiver&quot;) // å®é™…æ•°æ®åº“åˆ—åæ˜¯ &quot;receiver&quot;
    private String re;
}
</code></pre>
<h2>éæŒä¹…åŒ–å­—æ®µ</h2>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå±æ€§å’Œå­—æ®µéƒ½æ˜¯æŒä¹…åŒ–çš„ã€‚å¦‚æœä½ ä¸å¸Œæœ›æŸä¸ªå­—æ®µè¢«æ›´æ–°ï¼Œå¯ä»¥é€šè¿‡æ·»åŠ  <code>@Transient</code> æ³¨è§£å°†è¯¥å±æ€§æˆ–å­—æ®µæ ‡è®°ä¸ºéæŒä¹…åŒ–ã€‚</p>

            </article>

        </div>
        <footer>
    SqlMan, a part of <a href="https://framework.ajaxjs.com" target="_blank">AJ-Framework</a> open source. Mail:
    frank@ajaxjs.com, visit <a href="https://blog.csdn.net/zhangxin09" target="_blank">my blog(In Chinese)</a>.
    <br />
    <br />
     Copyright Â© 2025 Frank Cheung. All rights reserved.
    <script>
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?3cb62106ad945fc91efddfe250e1542e";
          var s = document.getElementsByTagName("script")[0];
          s.parentNode.insertBefore(hm, s);
        })();
    </script>
</footer>
    </body>
</html>